<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Shader Animation</title>
    <script type="importmap">
      {
        "imports": {
          "react": "https://cdn.skypack.dev/react@18.0.2",
          "react-dom": "https://cdn.skypack.dev/react-dom@18.0.2",
          "three": "https://cdn.skypack.dev/three@0.148.0",
          "react-three/fiber": "https://cdn.skypack.dev/@react-three/fiber@7.0.24"
        }
      }
    </script>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        border: 0;
        background: black;
      }

      .nt-embed {
        width: 100%;
        height: 100%;
      }

      .nt-embed canvas {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <script type="module">
      import React, { useRef } from "react";
      import ReactDOM from "react-dom";
      import * as THREE from "three";
      import { Canvas, useFrame } from "react-three/fiber";

      const embedRoot = document.createElement("div");
      embedRoot.className = "nt-embed";
      document.body.appendChild(embedRoot);

      const TextureMesh = () => {
        const mesh = useRef(null);
        useFrame((state) => {
          const { clock, mouse, gl } = state;
          if (mesh.current) {
            mesh.current.material.uniforms.u_mouse.value = [
              mouse.x / 2 + 0.5,
              mouse.y / 2 + 0.5,
            ];
            mesh.current.material.uniforms.u_time.value = clock.getElapsedTime();
            const c = gl.domElement.getBoundingClientRect();
            mesh.current.material.uniforms.u_resolution.value = [c.width, c.height];
          }
        });

        return React.createElement(
          "mesh",
          { ref: mesh, position: [0, 0, 0] },
          React.createElement("planeGeometry", { args: [100, 100] }),
          React.createElement("shaderMaterial", {
            fragmentShader: `YOUR_FRAGMENT_SHADER_CODE_HERE`,
            vertexShader: \`YOUR_VERTEX_SHADER_CODE_HERE\`,
            uniforms: {
              u_colors: {
                value: [
                  new THREE.Vector4(0.937, 0, 1, 1),
                  new THREE.Vector4(0.875, 1, 0, 1),
                  new THREE.Vector4(0, 1, 1, 1),
                  new THREE.Vector4(0.467, 0.22, 1, 1),
                ],
              },
              u_background: { value: [0, 0, 0, 1] },
              u_scale: { value: 0 },
              u_waves: { value: 8 },
              u_thickness: { value: 0.04 },
              u_stretch_x: { value: 0 },
              u_stretch_y: { value: 0.677 },
              u_blur: { value: 0.04 },
              u_speed: { value: 0.196 },
              u_coil: { value: 6.084 },
              u_time: { value: 0 },
              u_mouse: { value: [0, 0] },
              u_resolution: { value: [1024, 1024] },
            },
            flatShading: true,
            doubleSided: true,
          })
        );
      };

      ReactDOM.render(
        React.createElement(
          Canvas,
          {
            gl: { alpha: true, antialias: true },
            dpr: 1,
            camera: { fov: 75, near: 0.1, far: 1000, position: [0, 0, 5] },
            style: { height: "100%", width: "100%" },
          },
          React.createElement(TextureMesh)
        ),
        embedRoot
      );
    </script>
  </body>
</html>